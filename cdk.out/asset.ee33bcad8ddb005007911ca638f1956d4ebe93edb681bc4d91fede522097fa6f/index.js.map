{
  "version": 3,
  "sources": ["../asset-input/src/functions/auth/define-auth-challenge/index.ts"],
  "sourcesContent": ["interface ChallengeSession {\n    challengeName: string;\n    challengeResult: boolean;\n}\n\ninterface AuthEvent {\n    session: ChallengeSession[];\n    request: {\n        userNotFound?: boolean;\n    };\n}\n\ninterface AuthResponse {\n    isValid?: boolean;\n    challengeName?: string;\n    issueTokens: boolean;\n    failAuthentication: boolean;\n}\n\nexport const handler = async (event: AuthEvent): Promise<AuthResponse> => {\n    const { session, request } = event;\n    \n    // If user is not found, fail\n    if (request.userNotFound) {\n        return {\n            isValid: false,\n            failAuthentication: true,\n            issueTokens: false\n        };\n    }\n\n    if (session.length === 0) {\n        // First challenge - send OTP\n        return {\n            challengeName: 'CUSTOM_CHALLENGE',\n            issueTokens: false,\n            failAuthentication: false\n        };\n    } else if (session.length === 1 && session[0].challengeName === 'CUSTOM_CHALLENGE') {\n        // Verify the OTP\n        if (session[0].challengeResult === true) {\n            return {\n                issueTokens: true,\n                failAuthentication: false\n            };\n        } else {\n            return {\n                issueTokens: false,\n                failAuthentication: true\n            };\n        }\n    }\n\n    return {\n        issueTokens: false,\n        failAuthentication: true\n    };\n};"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAmBO,IAAME,EAAU,MAAOE,GAA4C,CACtE,GAAM,CAAE,QAAAC,EAAS,QAAAC,CAAQ,EAAIF,EAG7B,OAAIE,EAAQ,aACD,CACH,QAAS,GACT,mBAAoB,GACpB,YAAa,EACjB,EAGAD,EAAQ,SAAW,EAEZ,CACH,cAAe,mBACf,YAAa,GACb,mBAAoB,EACxB,EACOA,EAAQ,SAAW,GAAKA,EAAQ,CAAC,EAAE,gBAAkB,mBAExDA,EAAQ,CAAC,EAAE,kBAAoB,GACxB,CACH,YAAa,GACb,mBAAoB,EACxB,EAEO,CACH,YAAa,GACb,mBAAoB,EACxB,EAID,CACH,YAAa,GACb,mBAAoB,EACxB,CACJ",
  "names": ["define_auth_challenge_exports", "__export", "handler", "__toCommonJS", "event", "session", "request"]
}
