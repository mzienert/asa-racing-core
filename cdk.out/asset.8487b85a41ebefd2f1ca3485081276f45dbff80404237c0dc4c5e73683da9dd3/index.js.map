{
  "version": 3,
  "sources": ["../asset-input/src/functions/auth/create-auth-challenge/index.ts"],
  "sourcesContent": ["import { CreateAuthChallengeTriggerEvent } from 'aws-lambda';\nimport { CognitoIdentityServiceProvider } from 'aws-sdk';\n\nconst cognito = new CognitoIdentityServiceProvider();\n\nexport const handler = async (event: CreateAuthChallengeTriggerEvent) => {\n    let secretLoginCode: string;\n    \n    if (!event.request.session || !event.request.session.length) {\n        // Generate a new secret login code\n        secretLoginCode = Math.floor(100000 + Math.random() * 900000).toString();\n        \n        // Send the code via Cognito\n        await cognito.adminCreateUser({\n            UserPoolId: event.userPoolId,\n            Username: event.request.userAttributes.email,\n            MessageAction: 'SUPPRESS',\n            TemporaryPassword: secretLoginCode\n        }).promise();\n        \n        // Set up the challenge\n        event.response.privateChallengeParameters = {\n            secretLoginCode,\n        };\n        event.response.challengeMetadata = 'CUSTOM_CHALLENGE';\n    }\n\n    return event;\n}; "],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GACA,IAAAI,EAA+C,mBAEzCC,EAAU,IAAI,iCAEPH,EAAU,MAAOI,GAA2C,CACrE,IAAIC,EAEJ,OAAI,CAACD,EAAM,QAAQ,SAAW,CAACA,EAAM,QAAQ,QAAQ,UAEjDC,EAAkB,KAAK,MAAM,IAAS,KAAK,OAAO,EAAI,GAAM,EAAE,SAAS,EAGvE,MAAMF,EAAQ,gBAAgB,CAC1B,WAAYC,EAAM,WAClB,SAAUA,EAAM,QAAQ,eAAe,MACvC,cAAe,WACf,kBAAmBC,CACvB,CAAC,EAAE,QAAQ,EAGXD,EAAM,SAAS,2BAA6B,CACxC,gBAAAC,CACJ,EACAD,EAAM,SAAS,kBAAoB,oBAGhCA,CACX",
  "names": ["create_auth_challenge_exports", "__export", "handler", "__toCommonJS", "import_aws_sdk", "cognito", "event", "secretLoginCode"]
}
